<!DOCTYPE html>
<html>
	<head>
		<script
			src="https://cdn.socket.io/4.3.2/socket.io.min.js"
			integrity="sha384-KAZ4DtjNhLChOB/hxXuKqhMLYvx3b5MlT55xPEiNmREKRzeEm+RVPlTnAn0ajQNs"
			crossorigin="anonymous"
		></script>
		<script>
			const socket = io('http://localhost:8080/');
			socket.on('connect', function () {
				console.log('Connected');

				socket.emit('events', { test: 'test' });
				socket.emit('identity', 0, (response) =>
					console.log('Identity:', response),
				);
			});
			socket.on('connect_error', function (data) {
				console.log('err', data);
				document.getElementById('data').value += JSON.stringify(data) + '\n';
			});
			socket.on('events', function (data) {
				console.log('event', data);
				document.getElementById('data').value += JSON.stringify(data) + '\n';
			});
			socket.on('exception', function (data) {
				console.log('event', data);
				document.getElementById('data').value += JSON.stringify(data) + '\n';
			});
			socket.on('disconnect', function () {
				console.log('Disconnected');
				document.getElementById('data').value += JSON.stringify(data) + '\n';
			});
			let clickEventData = { count: 1 };
			function clicker() {
				clickEventData.count++;
				socket.emit('events', clickEventData);
			}
		</script>
	</head>

	<body>
		<textarea id="data" cols="300" rows="40" autocomplete="off"></textarea>
		<button id="clicker" onclick="clicker()">Click me!</button>
	</body>
</html>
